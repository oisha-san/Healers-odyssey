<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Healer's Odyssey - Medical RPG</title>
    <link href="https://fonts.googleapis.com/css2?family=MedievalSharp&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #4a2c82;
            --secondary: #2d1b4e;
            --accent: #8a4fff;
            --text: #e0d6ff;
            --dark-bg: #1a1029;
            --light-bg: #2a1f3d;
            --success: #4caf50;
            --danger: #f44336;
            --warning: #ff9800;
            --xp-bar: linear-gradient(90deg, #8a4fff, #4a2c82);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text);
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(74, 44, 130, 0.2) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(138, 79, 255, 0.2) 0%, transparent 20%);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 2px solid var(--secondary);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo img {
            width: 50px;
            height: 50px;
        }

        .logo h1 {
            font-family: 'MedievalSharp', cursive;
            font-size: 28px;
            background: linear-gradient(to right, var(--accent), #b388ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(138, 79, 255, 0.3);
        }

        .player-stats {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .stat-box {
            background-color: var(--light-bg);
            padding: 10px 15px;
            border-radius: 8px;
            min-width: 100px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .stat-box h3 {
            font-size: 12px;
            color: #b388ff;
            margin-bottom: 5px;
        }

        .stat-box p {
            font-weight: 600;
            font-size: 16px;
        }

        .xp-bar-container {
            width: 200px;
            height: 20px;
            background-color: var(--secondary);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .xp-bar {
            height: 100%;
            background: var(--xp-bar);
            width: 65%;
            transition: width 0.5s ease;
        }

        .xp-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            font-weight: bold;
            color: white;
            text-shadow: 0 0 3px rgba(0, 0, 0, 0.8);
        }

        .main-content {
            display: grid;
            grid-template-columns: 250px 1fr;
            gap: 20px;
        }

        .sidebar {
            background-color: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-menu {
            list-style: none;
        }

        .nav-item {
            margin-bottom: 15px;
        }

        .nav-link {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 6px;
            color: var(--text);
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-link:hover, .nav-link.active {
            background-color: var(--primary);
            color: white;
        }

        .nav-link i {
            font-size: 18px;
        }

        .content-area {
            background-color: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .section-title {
            font-family: 'MedievalSharp', cursive;
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .world-selector {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .world-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .world-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
        }

        .world-card.active {
            border: 2px solid var(--accent);
            box-shadow: 0 0 15px var(--accent);
        }

        .world-card.locked {
            filter: grayscale(0.8);
            cursor: not-allowed;
        }

        .world-card.locked::after {
            content: "Level " attr(data-required-level) " required";
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            color: var(--danger);
            font-weight: bold;
            font-size: 12px;
        }

        .world-card h3 {
            margin-bottom: 10px;
            font-size: 18px;
        }

        .world-card p {
            font-size: 14px;
            opacity: 0.8;
        }

        .world-icon {
            font-size: 40px;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .progress {
            font-size: 12px;
            margin-top: 10px;
        }

        .mission-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .mission-card {
            background-color: var(--secondary);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-left: 4px solid var(--accent);
        }

        .mission-card.completed {
            opacity: 0.7;
            border-left-color: var(--success);
        }

        .mission-card.locked {
            filter: grayscale(0.8);
            pointer-events: none;
        }

        .mission-card h3 {
            margin-bottom: 10px;
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .mission-card p {
            margin-bottom: 15px;
            font-size: 14px;
            opacity: 0.9;
        }

        .mission-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            margin-bottom: 15px;
        }

        .mission-xp {
            color: var(--accent);
            font-weight: bold;
        }

        .mission-difficulty {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
        }

        .difficulty-easy {
            background-color: rgba(76, 175, 80, 0.2);
            color: var(--success);
        }

        .difficulty-medium {
            background-color: rgba(255, 152, 0, 0.2);
            color: var(--warning);
        }

        .difficulty-hard {
            background-color: rgba(244, 67, 54, 0.2);
            color: var(--danger);
        }

        .btn {
            padding: 8px 16px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--accent);
            color: white;
        }

        .btn-primary:hover {
            background-color: #7b3dff;
            box-shadow: 0 0 10px rgba(138, 79, 255, 0.5);
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
        }

        .btn-outline:hover {
            background-color: rgba(138, 79, 255, 0.1);
        }

        .boss-section {
            background: linear-gradient(135deg, #3a1c71, #d76d77, #ffaf7b);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .boss-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('boss-pattern.png') center/cover;
            opacity: 0.1;
            z-index: 0;
        }

        .boss-content {
            position: relative;
            z-index: 1;
        }

        .boss-title {
            font-family: 'MedievalSharp', cursive;
            font-size: 28px;
            color: white;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .boss-subtitle {
            font-size: 16px;
            margin-bottom: 20px;
            color: rgba(255, 255, 255, 0.9);
        }

        .boss-health {
            width: 100%;
            height: 30px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 20px;
            overflow: hidden;
            position: relative;
        }

        .boss-health-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #ff416c, #ff4b2b);
            transition: width 0.5s ease;
        }

        .boss-health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.8);
        }

        .boss-image {
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            background-color: rgba(0, 0, 0, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }

        .boss-attack-options {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .attack-option {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .attack-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .attack-easy {
            background-color: rgba(76, 175, 80, 0.2);
            color: var(--success);
            border: 2px solid var(--success);
        }

        .attack-medium {
            background-color: rgba(255, 152, 0, 0.2);
            color: var(--warning);
            border: 2px solid var(--warning);
        }

        .attack-hard {
            background-color: rgba(244, 67, 54, 0.2);
            color: var(--danger);
            border: 2px solid var(--danger);
        }

        .boss-rewards {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
        }

        .reward-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .reward-icon {
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
        }

        .reward-amount {
            font-size: 14px;
            font-weight: bold;
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-content {
            background-color: var(--light-bg);
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            color: var(--text);
            cursor: pointer;
        }

        .question-container {
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 18px;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .options-list {
            list-style: none;
        }

        .option-item {
            padding: 15px;
            margin-bottom: 10px;
            background-color: var(--secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-left: 4px solid transparent;
        }

        .option-item:hover {
            background-color: rgba(138, 79, 255, 0.1);
            border-left-color: var(--accent);
        }

        .option-item.selected {
            background-color: rgba(138, 79, 255, 0.2);
            border-left-color: var(--accent);
        }

        .option-item.correct {
            background-color: rgba(76, 175, 80, 0.2);
            border-left-color: var(--success);
        }

        .option-item.incorrect {
            background-color: rgba(244, 67, 54, 0.2);
            border-left-color: var(--danger);
        }

        .feedback-section {
            margin-top: 20px;
            padding: 15px;
            background-color: var(--secondary);
            border-radius: 8px;
            display: none;
        }

        .feedback-section.show {
            display: block;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--accent);
        }

        .xp-gained {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
            font-weight: bold;
            color: var(--accent);
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
            font-size: 14px;
            color: var(--warning);
        }

        .streak-icon {
            color: var(--warning);
        }

        .next-btn {
            margin-top: 20px;
            width: 100%;
        }

        .achievements-section {
            margin-top: 30px;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
        }

        .achievement-card {
            background-color: var(--secondary);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .achievement-icon {
            width: 60px;
            height: 60px;
            background-color: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
            color: gold;
        }

        .achievement-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .achievement-desc {
            font-size: 13px;
            opacity: 0.8;
        }

        .achievement-progress {
            height: 5px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin-top: 10px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--accent);
            width: 30%;
        }

        .achievement-locked {
            filter: grayscale(0.8);
            opacity: 0.6;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .player-stats {
                flex-wrap: wrap;
                justify-content: center;
                gap: 10px;
            }
            
            .stat-box {
                min-width: auto;
                padding: 8px 12px;
            }
            
            .world-selector {
                grid-template-columns: 1fr;
            }
            
            .mission-list {
                grid-template-columns: 1fr;
            }
            
            .boss-attack-options {
                flex-direction: column;
                align-items: center;
            }
        }

        /* Animation classes */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake {
            animation: shake 0.5s;
        }

        @keyframes bossHit {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            50% { transform: translateX(10px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .boss-hit {
            animation: bossHit 0.3s;
        }

        @keyframes victory {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .victory {
            animation: victory 1s infinite;
            color: gold !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <img src="https://via.placeholder.com/50" alt="Healer's Odyssey Logo">
                <h1>Healer's Odyssey</h1>
            </div>
            <div class="player-stats">
                <div class="stat-box">
                    <h3>Level</h3>
                    <p id="playerLevel">1</p>
                </div>
                <div class="stat-box">
                    <h3>Title</h3>
                    <p id="playerTitle">Medical Student</p>
                </div>
                <div class="stat-box">
                    <h3>Streak</h3>
                    <p id="playerStreak">0 days</p>
                </div>
                <div class="xp-bar-container">
                    <div class="xp-bar" id="xpBar" style="width: 0%;"></div>
                    <div class="xp-text" id="xpText">0/100 XP</div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#" class="nav-link active" data-section="world-map">
                            <i class="fas fa-map"></i>
                            <span>World Map</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="missions">
                            <i class="fas fa-tasks"></i>
                            <span>Missions</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="achievements">
                            <i class="fas fa-trophy"></i>
                            <span>Achievements</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="profile">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="boss-battles">
                            <i class="fas fa-swords"></i>
                            <span>Boss Battles</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#" class="nav-link" data-section="library">
                            <i class="fas fa-book"></i>
                            <span>Medical Library</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="content-area">
                <!-- World Map Section -->
                <div class="content-section" id="world-map">
                    <h2 class="section-title">
                        <i class="fas fa-map-marked-alt"></i>
                        World Map
                    </h2>

                    <div class="world-selector">
                        <!-- Internal Medicine (Starter World) -->
                        <div class="world-card active" data-world="internal-medicine">
                            <div class="world-icon">
                                <i class="fas fa-heartbeat"></i>
                            </div>
                            <h3>Internal Medicine</h3>
                            <p>Final Fantasy World</p>
                            <div class="progress" id="im-progress">0% Complete</div>
                        </div>
                        
                        <!-- Pediatrics (Locked until Level 5) -->
                        <div class="world-card locked" data-world="pediatrics" data-required-level="5">
                            <div class="world-icon">
                                <i class="fas fa-baby"></i>
                            </div>
                            <h3>Pediatrics</h3>
                            <p>Dragon Quest World</p>
                        </div>
                        
                        <!-- Surgery (Locked until Level 10) -->
                        <div class="world-card locked" data-world="surgery" data-required-level="10">
                            <div class="world-icon">
                                <i class="fas fa-scalpel"></i>
                            </div>
                            <h3>Surgery</h3>
                            <p>Octopath Traveler World</p>
                        </div>
                        
                        <!-- Neurology (Locked until Level 15) -->
                        <div class="world-card locked" data-world="neurology" data-required-level="15">
                            <div class="world-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <h3>Neurology</h3>
                            <p>Sea of Stars World</p>
                        </div>
                    </div>

                    <div class="boss-section">
                        <div class="boss-content">
                            <h2 class="boss-title">Weekly Boss: <span id="bossName">Pathophysiology Phantom</span></h2>
                            <p class="boss-subtitle">Defeat the boss by answering questions correctly!</p>
                            
                            <div class="boss-health">
                                <div class="boss-health-bar" id="bossHealthBar" style="width: 100%;"></div>
                                <div class="boss-health-text" id="bossHealthText">100% Health</div>
                            </div>
                            
                            <div class="boss-image pulse" id="bossImage">
                                <i class="fas fa-ghost"></i>
                            </div>
                            
                            <p>Choose your attack strength:</p>
                            <div class="boss-attack-options">
                                <div class="attack-option attack-easy" data-difficulty="easy">
                                    <i class="fas fa-sword"></i> Easy (+5 XP, 5 damage)
                                </div>
                                <div class="attack-option attack-medium" data-difficulty="medium">
                                    <i class="fas fa-swords"></i> Medium (+10 XP, 10 damage)
                                </div>
                                <div class="attack-option attack-hard" data-difficulty="hard">
                                    <i class="fas fa-fire"></i> Hard (+20 XP, 20 damage)
                                </div>
                            </div>
                            
                            <button class="btn btn-primary" id="challengeBossBtn">
                                <i class="fas fa-fist-raised"></i> Challenge the Boss
                            </button>
                            
                            <div class="boss-rewards">
                                <div class="reward-item">
                                    <div class="reward-icon">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="reward-amount">500 XP</div>
                                </div>
                                <div class="reward-item">
                                    <div class="reward-icon">
                                        <i class="fas fa-medal"></i>
                                    </div>
                                    <div class="reward-amount">"Bane of Patho" Title</div>
                                </div>
                                <div class="reward-item">
                                    <div class="reward-icon">
                                        <i class="fas fa-hat-wizard"></i>
                                    </div>
                                    <div class="reward-amount">Wizard Hat</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h2 class="section-title">
                        <i class="fas fa-tasks"></i>
                        Available Missions
                    </h2>

                    <div class="mission-list" id="missionList">
                        <!-- Missions will be loaded here -->
                        <div class="mission-card" data-mission="copd-case">
                            <h3>
                                <i class="fas fa-lungs"></i>
                                COPD Case Study
                            </h3>
                            <div class="mission-meta">
                                <span class="mission-xp">+50 XP</span>
                                <span class="mission-difficulty difficulty-medium">Medium</span>
                            </div>
                            <p>A 65-year-old male smoker presents with worsening dyspnea...</p>
                            <button class="btn btn-primary start-mission">
                                <i class="fas fa-play"></i> Start Mission
                            </button>
                        </div>
                        
                        <div class="mission-card locked" data-mission="acs-case">
                            <h3>
                                <i class="fas fa-heart"></i>
                                Acute Coronary Syndrome
                            </h3>
                            <div class="mission-meta">
                                <span class="mission-xp">+80 XP</span>
                                <span class="mission-difficulty difficulty-hard">Hard</span>
                            </div>
                            <p>A 58-year-old female presents with crushing chest pain...</p>
                            <button class="btn btn-outline">
                                <i class="fas fa-lock"></i> Locked
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Other sections (initially hidden) -->
                <div class="content-section" id="missions" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-tasks"></i>
                        All Missions
                    </h2>
                    <p>Mission progress tracking will appear here.</p>
                </div>

                <div class="content-section" id="achievements" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-trophy"></i>
                        Achievements
                    </h2>
                    <div class="achievements-grid" id="achievementsGrid">
                        <div class="achievement-card">
                            <div class="achievement-icon">
                                <i class="fas fa-medal"></i>
                            </div>
                            <h3 class="achievement-title">First Steps</h3>
                            <p class="achievement-desc">Complete your first mission</p>
                            <div class="achievement-progress">
                                <div class="progress-bar" style="width: 0%;"></div>
                            </div>
                        </div>
                        <div class="achievement-card achievement-locked">
                            <div class="achievement-icon">
                                <i class="fas fa-fire"></i>
                            </div>
                            <h3 class="achievement-title">Hot Streak</h3>
                            <p class="achievement-desc">Maintain a 5-day streak</p>
                            <div class="achievement-progress">
                                <div class="progress-bar" style="width: 0%;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="content-section" id="profile" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-user"></i>
                        Your Profile
                    </h2>
                    <div id="profileContent">
                        <p>Total XP Earned: <span id="totalXP">0</span></p>
                        <p>Missions Completed: <span id="missionsCompleted">0</span></p>
                        <p>Bosses Defeated: <span id="bossesDefeated">0</span></p>
                    </div>
                </div>

                <div class="content-section" id="boss-battles" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-swords"></i>
                        Boss Battle Arena
                    </h2>
                    <div id="bossBattlesContent">
                        <p>No bosses defeated yet. Challenge the weekly boss to begin!</p>
                    </div>
                </div>

                <div class="content-section" id="library" style="display: none;">
                    <h2 class="section-title">
                        <i class="fas fa-book"></i>
                        Medical Library
                    </h2>
                    <div id="libraryContent">
                        <p>Study resources will appear here as you unlock them.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MCQ Modal -->
    <div class="modal" id="mcqModal">
        <div class="modal-content">
            <button class="close-modal">&times;</button>
            
            <div class="question-container">
                <h3 id="questionTitle">Mission: Loading...</h3>
                <p class="question-text" id="questionText">
                    Loading question...
                </p>
                
                <ul class="options-list" id="optionsList">
                    <!-- Options will be loaded here -->
                </ul>
                
                <div class="feedback-section" id="feedbackSection">
                    <p class="feedback-title">Explanation:</p>
                    <p id="explanationText">Explanation will appear here.</p>
                    
                    <div class="xp-gained">
                        <i class="fas fa-bolt"></i>
                        <span id="xpGainedText">+0 XP gained</span>
                    </div>
                    
                    <div class="streak-counter">
                        <i class="fas fa-fire streak-icon"></i>
                        <span id="streakCounter">0-day streak</span>
                    </div>
                </div>
                
                <button class="btn btn-primary next-btn" id="nextQuestionBtn">
                    <i class="fas fa-arrow-right"></i> Next Question
                </button>
            </div>
        </div>
    </div>

    <!-- Victory Modal -->
    <div class="modal" id="victoryModal">
        <div class="modal-content" style="text-align: center;">
            <button class="close-modal">&times;</button>
            <div style="font-size: 60px; color: gold; margin: 20px 0;">
                <i class="fas fa-trophy"></i>
            </div>
            <h2 style="font-size: 32px; color: gold; margin-bottom: 20px;">BOSS DEFEATED!</h2>
            <h3 id="victoryBossName">Pathophysiology Phantom</h3>
            <p>You've earned:</p>
            <div class="boss-rewards" style="justify-content: center; margin: 20px 0;">
                <div class="reward-item">
                    <div class="reward-icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="reward-amount" id="victoryXP">500 XP</div>
                </div>
                <div class="reward-item">
                    <div class="reward-icon">
                        <i class="fas fa-medal"></i>
                    </div>
                    <div class="reward-amount" id="victoryTitle">"Bane of Patho" Title</div>
                </div>
            </div>
            <button class="btn btn-primary" id="claimRewardsBtn">
                <i class="fas fa-gift"></i> Claim Rewards
            </button>
        </div>
    </div>

    <script>
        // ========== GAME DATA ==========
        const gameData = {
            player: {
                xp: 0,
                level: 1,
                streak: 0,
                unlockedWorlds: ['internal-medicine'],
                completedMissions: [],
                defeatedBosses: [],
                achievements: [],
                lastPlayed: new Date().toISOString()
            },
            worlds: {
                'internal-medicine': {
                    name: 'Internal Medicine',
                    icon: 'fa-heartbeat',
                    theme: 'Final Fantasy',
                    requiredLevel: 1,
                    progress: 0,
                    questions: [
                        {
                            id: 'copd-1',
                            text: "A 65-year-old male with a 40-pack-year smoking history presents with worsening dyspnea over the past 2 years. He reports a chronic productive cough. On physical exam, you note barrel chest and diminished breath sounds bilaterally. Which of the following is the most likely diagnosis?",
                            options: ["Asthma", "COPD", "Pulmonary fibrosis", "Bronchiectasis"],
                            correct: 1,
                            explanation: "The patient's history of heavy smoking, chronic productive cough, and physical exam findings of barrel chest and diminished breath sounds are classic for COPD. While asthma can cause dyspnea, it typically has a more variable course and is not associated with a chronic productive cough in most cases.",
                            difficulty: "medium",
                            xp: 10
                        },
                        {
                            id: 'acs-1',
                            text: "A 58-year-old female presents with crushing substernal chest pain radiating to her left arm. ECG shows ST segment elevation in leads II, III, and aVF. Which coronary artery is most likely occluded?",
                            options: ["Left anterior descending", "Left circumflex", "Right coronary artery", "Left main coronary artery"],
                            correct: 2,
                            explanation: "ST elevation in the inferior leads (II, III, aVF) indicates an inferior wall MI, which is most commonly caused by occlusion of the right coronary artery (RCA).",
                            difficulty: "hard",
                            xp: 20
                        }
                    ],
                    boss: {
                        name: "Pathophysiology Phantom",
                        icon: "fa-ghost",
                        health: 100,
                        rewards: {
                            xp: 500,
                            title: "Pulmonary Master",
                            item: "Wizard Hat"
                        }
                    },
                    missions: [
                        {
                            id: "copd-case",
                            name: "COPD Case Study",
                            icon: "fa-lungs",
                            difficulty: "medium",
                            xp: 50,
                            questions: ['copd-1'],
                            description: "A series of cases exploring chronic obstructive pulmonary disease"
                        },
                        {
                            id: "acs-case",
                            name: "Acute Coronary Syndrome",
                            icon: "fa-heart",
                            difficulty: "hard",
                            xp: 80,
                            questions: ['acs-1'],
                            description: "Diagnose and manage acute coronary syndromes",
                            requiredLevel: 3
                        }
                    ]
                },
                'pediatrics': {
                    name: 'Pediatrics',
                    icon: 'fa-baby',
                    theme: 'Dragon Quest',
                    requiredLevel: 5,
                    progress: 0,
                    questions: [
                        // Pediatric questions would go here
                    ],
                    boss: {
                        name: "Fever Dragon",
                        icon: "fa-dragon",
                        health: 120,
                        rewards: {
                            xp: 600,
                            title: "Pediatric Champion",
                            item: "Dragon Scale"
                        }
                    },
                    missions: []
                },
                'surgery': {
                    name: 'Surgery',
                    icon: 'fa-scalpel',
                    theme: 'Octopath Traveler',
                    requiredLevel: 10,
                    progress: 0,
                    questions: [],
                    boss: {
                        name: "The Sepsis Reaper",
                        icon: "fa-skull",
                        health: 150,
                        rewards: {
                            xp: 750,
                            title: "Master Surgeon",
                            item: "Golden Scalpel"
                        }
                    },
                    missions: []
                },
                'neurology': {
                    name: 'Neurology',
                    icon: 'fa-brain',
                    theme: 'Sea of Stars',
                    requiredLevel: 15,
                    progress: 0,
                    questions: [],
                    boss: {
                        name: "The Stroke Phantom",
                        icon: "fa-ghost",
                        health: 200,
                        rewards: {
                            xp: 1000,
                            title: "Neuro Specialist",
                            item: "Brain Helm"
                        }
                    },
                    missions: []
                }
            },
            achievements: [
                {
                    id: "first-blood",
                    name: "First Blood",
                    description: "Defeat your first boss",
                    icon: "fa-tint",
                    xp: 100,
                    unlocked: false
                },
                {
                    id: "quick-learner",
                    name: "Quick Learner",
                    description: "Complete 5 missions in one day",
                    icon: "fa-bolt",
                    xp: 150,
                    unlocked: false
                }
            ]
        };

        // ========== GAME FUNCTIONS ==========
        function initGame() {
            loadGame();
            setupNavigation();
            setupWorldSelection();
            setupMissions();
            setupBossBattle();
            setupQuestionModal();
            updatePlayerStats();
            renderWorldProgress();
            renderMissions();
            renderBossStatus();
            
            // Show welcome message
            setTimeout(() => {
                alert("Welcome to Healer's Odyssey! Start with Internal Medicine missions to level up and unlock new worlds.");
            }, 500);
        }

        function setupNavigation() {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const section = link.dataset.section;
                    
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    
                    document.querySelectorAll('.content-section').forEach(sec => sec.style.display = 'none');
                    document.getElementById(section).style.display = 'block';
                });
            });
        }

        function setupWorldSelection() {
            document.querySelectorAll('.world-card').forEach(card => {
                card.addEventListener('click', () => {
                    if (card.classList.contains('locked')) {
                        const requiredLevel = card.dataset.requiredLevel;
                        alert(`Reach Level ${requiredLevel} to unlock this world!`);
                        return;
                    }
                    
                    document.querySelectorAll('.world-card').forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                    gameData.player.currentWorld = card.dataset.world;
                    renderMissions();
                });
            });
        }

        function setupMissions() {
            const missionList = document.getElementById('missionList');
            missionList.innerHTML = '';
            
            const world = gameData.worlds[gameData.player.currentWorld];
            
            world.missions.forEach(mission => {
                const missionCard = document.createElement('div');
                missionCard.className = 'mission-card';
                missionCard.dataset.mission = mission.id;
                
                if (mission.requiredLevel && gameData.player.level < mission.requiredLevel) {
                    missionCard.classList.add('locked');
                }
                
                if (gameData.player.completedMissions.includes(mission.id)) {
                    missionCard.classList.add('completed');
                }
                
                missionCard.innerHTML = `
                    <h3><i class="fas ${mission.icon}"></i> ${mission.name}</h3>
                    <div class="mission-meta">
                        <span class="mission-xp">+${mission.xp} XP</span>
                        <span class="mission-difficulty difficulty-${mission.difficulty}">${mission.difficulty.charAt(0).toUpperCase() + mission.difficulty.slice(1)}</span>
                    </div>
                    <p>${mission.description}</p>
                    ${gameData.player.completedMissions.includes(mission.id) ? 
                        '<button class="btn btn-outline"><i class="fas fa-check"></i> Completed</button>' : 
                        mission.requiredLevel && gameData.player.level < mission.requiredLevel ?
                        `<button class="btn btn-outline"><i class="fas fa-lock"></i> Level ${mission.requiredLevel} required</button>` :
                        '<button class="btn btn-primary start-mission"><i class="fas fa-play"></i> Start Mission</button>'}
                `;
                missionList.appendChild(missionCard);
            });
            
            document.querySelectorAll('.start-mission').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const missionId = e.target.closest('.mission-card').dataset.mission;
                    startMission(missionId);
                });
            });
        }

        function startMission(missionId) {
            const world = gameData.worlds[gameData.player.currentWorld];
            const mission = world.missions.find(m => m.id === missionId);
            
            gameData.player.currentMission = mission;
            gameData.player.currentQuestion = 0;
            gameData.player.correctAnswers = 0;
            
            loadQuestion(mission.questions[0]);
        }

        function loadQuestion(questionId) {
            const world = gameData.worlds[gameData.player.currentWorld];
            const question = world.questions.find(q => q.id === questionId);
            
            document.getElementById('questionTitle').textContent = `Mission: ${gameData.player.currentMission.name}`;
            document.getElementById('questionText').textContent = question.text;
            
            const optionsList = document.getElementById('optionsList');
            optionsList.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const li = document.createElement('li');
                li.className = 'option-item';
                li.textContent = option;
                li.dataset.index = index;
                optionsList.appendChild(li);
            });
            
            document.getElementById('explanationText').textContent = question.explanation;
            document.getElementById('xpGainedText').textContent = `+${question.xp} XP (${question.difficulty})`;
            document.getElementById('streakCounter').textContent = `${gameData.player.streak}-day streak`;
            
            document.getElementById('feedbackSection').classList.remove('show');
            document.getElementById('mcqModal').classList.add('active');
        }

        function setupQuestionModal() {
            document.getElementById('optionsList').addEventListener('click', (e) => {
                if (e.target.classList.contains('option-item')) {
                    document.querySelectorAll('.option-item').forEach(opt => opt.classList.remove('selected'));
                    e.target.classList.add('selected');
                }
            });
            
            document.getElementById('nextQuestionBtn').addEventListener('click', () => {
                const selectedOption = document.querySelector('.option-item.selected');
                if (!selectedOption) {
                    alert('Please select an answer!');
                    return;
                }
                
                const questionId = gameData.player.currentMission.questions[gameData.player.currentQuestion];
                const world = gameData.worlds[gameData.player.currentWorld];
                const question = world.questions.find(q => q.id === questionId);
                const isCorrect = parseInt(selectedOption.dataset.index) === question.correct;
                
                document.getElementById('feedbackSection').classList.add('show');
                selectedOption.classList.add(isCorrect ? 'correct' : 'incorrect');
                
                if (isCorrect) {
                    gameData.player.correctAnswers++;
                    gameData.player.xp += question.xp;
                    gameData.player.streak++;
                    
                    if (gameData.player.selectedDifficulty) {
                        const damage = {
                            easy: 5,
                            medium: 10,
                            hard: 20
                        }[gameData.player.selectedDifficulty];
                        
                        gameData.player.currentBossHealth = Math.max(0, gameData.player.currentBossHealth - damage);
                        renderBossStatus();
                        
                        if (gameData.player.currentBossHealth <= 0) {
                            setTimeout(() => {
                                document.getElementById('mcqModal').classList.remove('active');
                                showVictory();
                            }, 1500);
                            return;
                        }
                    }
                } else {
                    gameData.player.streak = 0;
                }
                
                updatePlayerStats();
                
                gameData.player.currentQuestion++;
                if (gameData.player.currentQuestion < gameData.player.currentMission.questions.length) {
                    document.getElementById('nextQuestionBtn').textContent = 'Next Question';
                    setTimeout(() => {
                        loadQuestion(gameData.player.currentMission.questions[gameData.player.currentQuestion]);
                    }, 1500);
                } else {
                    document.getElementById('nextQuestionBtn').textContent = 'Complete Mission';
                    document.getElementById('nextQuestionBtn').onclick = () => {
                        completeMission(gameData.player.currentMission.id);
                        document.getElementById('mcqModal').classList.remove('active');
                    };
                }
            });
            
            document.querySelector('.close-modal').addEventListener('click', () => {
                document.getElementById('mcqModal').classList.remove('active');
            });
        }

        function completeMission(missionId) {
            if (!gameData.player.completedMissions.includes(missionId)) {
                gameData.player.completedMissions.push(missionId);
                saveGame();
                renderMissions();
                
                // Check for achievement unlocks
                checkAchievements();
                
                // Update world progress
                updateWorldProgress();
            }
        }

        function setupBossBattle() {
            document.querySelectorAll('.attack-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.attack-option').forEach(opt => opt.classList.remove('active'));
                    option.classList.add('active');
                    gameData.player.selectedDifficulty = option.dataset.difficulty;
                });
            });
            
            document.getElementById('challengeBossBtn').addEventListener('click', () => {
                if (!gameData.player.selectedDifficulty) {
                    alert('Please select an attack strength first!');
                    return;
                }
                
                const world = gameData.worlds[gameData.player.currentWorld];
                const randomQuestion = world.questions[Math.floor(Math.random() * world.questions.length)];
                
                document.getElementById('questionTitle').textContent = `Boss Battle: ${world.boss.name}`;
                document.getElementById('questionText').textContent = randomQuestion.text;
                
                const optionsList = document.getElementById('optionsList');
                optionsList.innerHTML = '';
                
                randomQuestion.options.forEach((option, index) => {
                    const li = document.createElement('li');
                    li.className = 'option-item';
                    li.textContent = option;
                    li.dataset.index = index;
                    optionsList.appendChild(li);
                });
                
                document.getElementById('explanationText').textContent = randomQuestion.explanation;
                document.getElementById('xpGainedText').textContent = `+${randomQuestion.xp} XP (${randomQuestion.difficulty})`;
                document.getElementById('streakCounter').textContent = `${gameData.player.streak}-day streak`;
                
                document.getElementById('feedbackSection').classList.remove('show');
                document.getElementById('mcqModal').classList.add('active');
            });
        }

        function showVictory() {
            const world = gameData.worlds[gameData.player.currentWorld];
            
            document.getElementById('victoryBossName').textContent = world.boss.name;
            document.getElementById('victoryXP').textContent = `${world.boss.rewards.xp} XP`;
            document.getElementById('victoryTitle').textContent = `"${world.boss.rewards.title}" Title`;
            
            document.getElementById('victoryModal').classList.add('active');
            document.getElementById('bossImage').classList.add('victory');
            
            document.getElementById('claimRewardsBtn').onclick = () => {
                gameData.player.xp += world.boss.rewards.xp;
                if (!gameData.player.defeatedBosses.includes(world.boss.name)) {
                    gameData.player.defeatedBosses.push(world.boss.name);
                }
                updatePlayerStats();
                resetBoss();
                document.getElementById('victoryModal').classList.remove('active');
                document.getElementById('bossImage').classList.remove('victory');
                checkWorldUnlocks();
                checkAchievements();
            };
        }

        function resetBoss() {
            const world = gameData.worlds[gameData.player.currentWorld];
            gameData.player.currentBossHealth = world.boss.health;
            gameData.player.selectedDifficulty = null;
            renderBossStatus();
            document.querySelectorAll('.attack-option').forEach(opt => opt.classList.remove('active'));
        }

        function renderBossStatus() {
            const healthBar = document.getElementById('bossHealthBar');
            const healthText = document.getElementById('bossHealthText');
            const percentage = gameData.player.currentBossHealth;
            
            healthBar.style.width = `${percentage}%`;
            healthText.textContent = `${percentage}% Health`;
            
            if (percentage < 30) {
                healthBar.style.background = "linear-gradient(90deg, #ff0000, #cc0000)";
            } else {
                healthBar.style.background = "linear-gradient(90deg, #ff416c, #ff4b2b)";
            }
            
            if (percentage <= 0) {
                healthText.textContent = "DEFEATED!";
            }
        }

        function updatePlayerStats() {
            const xpNeeded = gameData.player.level * 100;
            if (gameData.player.xp >= xpNeeded) {
                gameData.player.level++;
                gameData.player.xp = gameData.player.xp - xpNeeded;
                checkWorldUnlocks();
            }
            
            document.getElementById('playerLevel').textContent = gameData.player.level;
            document.getElementById('playerStreak').textContent = `${gameData.player.streak} day${gameData.player.streak !== 1 ? 's' : ''}`;
            
            let title = "Medical Student";
            if (gameData.player.level >= 5) title = "Resident Physician";
            if (gameData.player.level >= 10) title = "Attending Physician";
            if (gameData.player.level >= 20) title = "Medical Specialist";
            if (gameData.player.level >= 30) title = "Master Healer";
            document.getElementById('playerTitle').textContent = title;
            
            const xpPercentage = (gameData.player.xp / (gameData.player.level * 100)) * 100;
            document.getElementById('xpBar').style.width = `${xpPercentage}%`;
            document.getElementById('xpText').textContent = `${gameData.player.xp}/${gameData.player.level * 100} XP`;
            
            saveGame();
        }

        function checkWorldUnlocks() {
            document.querySelectorAll('.world-card').forEach(card => {
                if (card.classList.contains('locked')) {
                    const requiredLevel = parseInt(card.dataset.requiredLevel);
                    
                    if (gameData.player.level >= requiredLevel) {
                        card.classList.remove('locked');
                        const worldId = card.dataset.world;
                        
                        if (!gameData.player.unlockedWorlds.includes(worldId)) {
                            gameData.player.unlockedWorlds.push(worldId);
                            card.querySelector('.progress').textContent = "0% Complete";
                            alert(`New World Unlocked: ${card.querySelector('h3').textContent}!`);
                        }
                    }
                }
            });
            
            saveGame();
        }

        function updateWorldProgress() {
            const world = gameData.worlds[gameData.player.currentWorld];
            const completedMissions = world.missions.filter(m => 
                gameData.player.completedMissions.includes(m.id)
            ).length;
            const progress = Math.round((completedMissions / world.missions.length) * 100);
            world.progress = progress;
            
            document.querySelector(`.world-card[data-world="${gameData.player.currentWorld}"] .progress`).textContent = 
                `${progress}% Complete`;
            
            saveGame();
        }

        function checkAchievements() {
            gameData.achievements.forEach(achievement => {
                if (!achievement.unlocked) {
                    let shouldUnlock = false;
                    
                    if (achievement.id === "first-blood" && 
                        gameData.player.defeatedBosses.length > 0) {
                        shouldUnlock = true;
                    }
                    
                    if (achievement.id === "quick-learner" && 
                        gameData.player.completedMissions.length >= 5) {
                        shouldUnlock = true;
                    }
                    
                    if (shouldUnlock) {
                        achievement.unlocked = true;
                        gameData.player.xp += achievement.xp;
                        alert(`Achievement Unlocked: ${achievement.name} (+${achievement.xp} XP)`);
                        updatePlayerStats();
                    }
                }
            });
        }

        function saveGame() {
            gameData.player.lastPlayed = new Date().toISOString();
            localStorage.setItem('healersOdysseySave', JSON.stringify(gameData.player));
        }

        function loadGame() {
            const savedGame = localStorage.getItem('healersOdysseySave');
            if (savedGame) {
                try {
                    const savedData = JSON.parse(savedGame);
                    Object.assign(gameData.player, savedData);
                    
                    // Update UI based on loaded data
                    document.getElementById('playerLevel').textContent = gameData.player.level;
                    document.getElementById('playerStreak').textContent = 
                        `${gameData.player.streak} day${gameData.player.streak !== 1 ? 's' : ''}`;
                    
                    const xpPercentage = (gameData.player.xp / (gameData.player.level * 100)) * 100;
                    document.getElementById('xpBar').style.width = `${xpPercentage}%`;
                    document.getElementById('xpText').textContent = 
                        `${gameData.player.xp}/${gameData.player.level * 100} XP`;
                    
                    // Unlock worlds based on level
                    checkWorldUnlocks();
                    
                    console.log('Game loaded from save');
                } catch (e) {
                    console.error('Error loading save:', e);
                }
            }
        }

        // Start the game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
